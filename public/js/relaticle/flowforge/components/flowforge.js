function d({state:a}){return{state:a,isLoading:{},fullyLoaded:{},init(){this.$wire.$on("kanban-items-loaded",t=>{let{columnId:e,isFullyLoaded:o}=t;o&&(this.fullyLoaded[e]=!0)})},handleSortableEnd(t){let e=t.to.sortable.toArray(),o=t.item.getAttribute("x-sortable-item");if(!o&&(o=t.item.getAttribute("data-card-id"),!o)){console.error("Flowforge: Could not determine card ID for move operation");return}let s=t.to.getAttribute("data-column-id");if(!s){console.error("Flowforge: Target column ID is missing");return}let i=t.item;this.setCardState(i,!0);let r=e.indexOf(o),l=r>0?e[r-1]:null,n=r<e.length-1?e[r+1]:null;this.$wire.moveCard(o,s,l,n).then(()=>this.setCardState(i,!1)).catch(()=>this.setCardState(i,!1))},setCardState(t,e){t.style.opacity=e?"0.7":"",t.style.pointerEvents=e?"none":""},isLoadingColumn(t){return this.isLoading[t]||!1},isColumnFullyLoaded(t){return this.fullyLoaded[t]||!1},handleSmoothScroll(t){this.isLoadingColumn(t)||this.isColumnFullyLoaded(t)||(this.isLoading[t]=!0,this.$wire.loadMoreItems(t).then(()=>setTimeout(()=>this.isLoading[t]=!1,100)).catch(()=>this.isLoading[t]=!1))},handleColumnScroll(t,e){if(this.isColumnFullyLoaded(e))return;let{scrollTop:o,scrollHeight:s,clientHeight:i}=t.target;(o+i)/s>=.8&&!this.isLoadingColumn(e)&&this.handleSmoothScroll(e)}}}export{d as default};
